<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAIRA - Admin Dashboard</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f9fa;
            color: #000;
            line-height: 1.4;
            overflow-x: hidden;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            font-family: 'Playfair Display', serif;
            font-size: 60px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #000;
            margin-bottom: 20px;
            animation: logoFadeIn 2s ease-in-out;
        }

        .loading-text {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #666;
            margin-bottom: 30px;
            animation: textSlideUp 2s ease-in-out 0.5s both;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #000;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes logoFadeIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes textSlideUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: headerSlideDown 0.8s ease-out 2.5s both;
        }

        @keyframes headerSlideDown {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(0); }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-logo {
            font-family: 'Times New Roman', serif;
            font-size: 60px;
            font-weight: normal;
            letter-spacing: 0.5px;
            margin-left: 15px;
            line-height: 0.9;
            text-transform: uppercase;
            color: #000;
        }

        .admin-title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            margin-left: 15px;
        }

        .header-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .logout-btn {
            background: #000;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #333;
            transform: translateY(-2px);
        }

        /* Main Container */
        .main-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            gap: 30px;
            padding: 30px;
            animation: contentFadeIn 1s ease-out 3s both;
        }

        @keyframes contentFadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: #fff;
            border-radius: 8px;
            padding: 30px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            height: fit-content;
            position: sticky;
            top: 120px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin: 0;
        }

        .sidebar-menu a {
            display: block;
            padding: 15px 30px;
            text-decoration: none;
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: #f8f9fa;
            color: #000;
            border-left-color: #000;
            transform: translateX(5px);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            background: #fff;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #000;
        }

        .add-btn {
            background: #000;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .add-btn:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
            animation: statCardFadeIn 0.6s ease-out;
            animation-fill-mode: both;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes statCardFadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #000;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #666;
            font-weight: 500;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
        }

        .data-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            color: #666;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 12px;
            color: #333;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-edit,
        .btn-delete,
        .btn-view {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-edit {
            background: #007bff;
            color: #fff;
        }

        .btn-edit:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .btn-delete {
            background: #dc3545;
            color: #fff;
        }

        .btn-delete:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .btn-view {
            background: #28a745;
            color: #fff;
        }

        .btn-view:hover {
            background: #1e7e34;
            transform: translateY(-1px);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            animation: modalFadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes modalFadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .modal-content {
            background: #fff;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            0% { transform: translateY(-50px) scale(0.9); }
            100% { transform: translateY(0) scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #000;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #000;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            color: #333;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn-save,
        .btn-cancel {
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-save {
            background: #000;
            color: #fff;
        }

        .btn-save:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .btn-cancel {
            background: #6c757d;
            color: #fff;
        }

        .btn-cancel:hover {
            background: #545b62;
            transform: translateY(-2px);
        }

        /* Status Badges */
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* Search and Filter */
        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'Inter', sans-serif;
        }

        .filter-select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'Inter', sans-serif;
            min-width: 150px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                padding: 20px;
                gap: 20px;
            }

            .sidebar {
                width: 100%;
                position: static;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .search-filter {
                flex-direction: column;
                align-items: stretch;
            }

            .section-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .modal-content {
                padding: 20px;
                margin: 20px;
            }
        }

        /* Hidden sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: sectionFadeIn 0.5s ease;
        }

        @keyframes sectionFadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Image preview */
        .image-preview {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #000;
            color: #fff;
            padding: 15px 20px;
            border-radius: 4px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 10001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #28a745;
        }

        .notification.error {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">KAIRA</div>
        <div class="loading-text">ADMIN DASHBOARD</div>
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div style="display: flex; align-items: center;">
                <div class="admin-logo" onclick="window.location.href='/'" style="cursor: pointer;">
  KAIRA
</div>

                <div class="admin-title">Admin Dashboard</div>
            </div>
            <div class="header-actions">
                <span style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Welcome, Admin</span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="#" class="menu-link active" data-section="dashboard">Dashboard</a></li>
                <li><a href="#" class="menu-link" data-section="users">Manage Users</a></li>
                <li><a href="#" class="menu-link" data-section="products">Manage Products</a></li>
                <li><a href="#" class="menu-link" data-section="transactions">Manage Transactions</a></li>
                <li><a href="#" class="menu-link" data-section="articles">Manage Articles</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1 class="section-title">Dashboard</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalUsers">0</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-label">Total Products</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalTransactions">0</div>
                        <div class="stat-label">Total Transactions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalArticles">0</div>
                        <div class="stat-label">Total Articles</div>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 30px; border-radius: 8px; text-align: center;">
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 24px; margin-bottom: 15px; color: #000;">Welcome to KAIRA Admin</h3>
                    <p style="color: #666; font-size: 14px; line-height: 1.6;">Manage your fashion empire with elegance and precision. Navigate through the menu to manage users, products, transactions, and articles.</p>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="content-section">
                <div class="section-header">
                    <h1 class="section-title">Manage Users</h1>
                    <button class="add-btn" onclick="openModal('userModal')">Add New User</button>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" placeholder="Search users..." id="userSearch">
                    <select class="filter-select" id="userFilter">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="content-section">
                <div class="section-header">
                    <h1 class="section-title">Manage Products</h1>
                    <button class="add-btn" onclick="openModal('productModal')">Add New Product</button>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" placeholder="Search products..." id="productSearch">
                    <select class="filter-select" id="productFilter">
                        <option value="">All Categories</option>
                        <option value="dress">Dress</option>
                        <option value="accessories">Accessories</option>
                        <option value="shoes">Shoes</option>
                        <option value="bags">Bags</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Transactions Section -->
            <section id="transactions" class="content-section">
                <div class="section-header">
                    <h1 class="section-title">Manage Transactions</h1>
                    <button class="add-btn" onclick="openModal('transactionModal')">Add New Transaction</button>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" placeholder="Search transactions..." id="transactionSearch">
                    <select class="filter-select" id="transactionFilter">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Customer</th>
                                <th>Product</th>
                                <th>Amount</th>
                                <th>Payment</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTableBody">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Articles Section -->
            <section id="articles" class="content-section">
                <div class="section-header">
                    <h1 class="section-title">Manage Articles</h1>
                    <button class="add-btn" onclick="openModal('articleModal')">Add New Article</button>
                </div>

                <div class="search-filter">
                    <input type="text" class="search-input" placeholder="Search articles..." id="articleSearch">
                    <select class="filter-select" id="articleFilter">
                        <option value="">All Status</option>
                        <option value="published">Published</option>
                        <option value="draft">Draft</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Image</th>
                                <th>Title</th>
                                <th>Author</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="articlesTableBody">
                            <!-- Articles will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="userModalTitle">Add/Edit User</h2>
                <button class="modal-close" onclick="closeModal('userModal')">&times;</button>
            </div>
            <form id="userForm">
                <input type="hidden" id="editingUserId">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" id="userName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="userEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="text" class="form-input" id="userPhone">
                </div>
                <div class="form-group">
                    <label class="form-label">Role</label>
                    <select class="form-select" id="userRole" required>
                        <option value="">Select Role</option>
                        <option value="admin">Admin</option>
                        <option value="customer">Customer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="userStatus" required>
                        <option value="">Select Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('userModal')">Cancel</button>
                    <button type="submit" class="btn-save">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="productModalTitle">Add/Edit Product</h2>
                <button class="modal-close" onclick="closeModal('productModal')">×</button>
            </div>
            <form id="productForm">
                <input type="hidden" id="editingProductId">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-input" id="productName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="dress">Dress</option>
                        <option value="accessories">Accessories</option>
                        <option value="shoes">Shoes</option>
                        <option value="bags">Bags</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Price (Rp)</label>
                    <input type="number" class="form-input" id="productPrice" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Stock</label>
                    <input type="number" class="form-input" id="productStock" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="productDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="productStatus" required>
                        <option value="">Select Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Product Image</label>
                    <input type="file" class="form-input" id="productImage" accept="image/*">
                    <img id="productImagePreview" src="/placeholder.svg" alt="Image Preview" class="image-preview" style="display: none; max-width: 100px; max-height: 100px; margin-top: 10px;">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('productModal')">Cancel</button>
                    <button type="submit" class="btn-save">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="transactionModalTitle">Add/Edit Transaction</h2>
                <button class="modal-close" onclick="closeModal('transactionModal')">&times;</button>
            </div>
            <form id="transactionForm">
                <input type="hidden" id="editingTransactionId">
                <div class="form-group">
                    <label class="form-label">Customer Name</label>
                    <input type="text" class="form-input" id="transactionCustomer" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Product</label>
                    <select class="form-select" id="transactionProduct" required>
                        <option value="">Select Product</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Quantity</label>
                    <input type="number" class="form-input" id="transactionQuantity" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Amount (Rp)</label>
                    <input type="number" class="form-input" id="transactionAmount" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="transactionStatus" required>
                        <option value="">Select Status</option>
                        <option value="pending">Pending</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('transactionModal')">Cancel</button>
                    <button type="submit" class="btn-save">Save Transaction</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Article Modal -->
    <div id="articleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="articleModalTitle">Add/Edit Article</h2>
                <button class="modal-close" onclick="closeModal('articleModal')">&times;</button>
            </div>
            <form id="articleForm">
                <input type="hidden" id="editingArticleId">
                <div class="form-group">
                    <label class="form-label">Article Title</label>
                    <input type="text" class="form-input" id="articleTitle" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Author</label>
                    <input type="text" class="form-input" id="articleAuthor" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="articleCategory" required>
                        <option value="">Select Category</option>
                        <option value="fashion">Fashion</option>
                        <option value="lifestyle">Lifestyle</option>
                        <option value="trends">Trends</option>
                        <option value="beauty">Beauty</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-textarea" id="articleContent" required style="min-height: 150px;"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Excerpt (Short Summary)</label>
                    <textarea class="form-textarea" id="articleExcerpt" required style="min-height: 80px;"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Image URL</label>
                    <input type="text" class="form-input" id="articleImage" required>
                    <small style="display: block; margin-top: 5px; color: #666;">Enter a URL for the article image</small>
                    <img id="articleImagePreview" src="/placeholder.svg" alt="Image Preview" class="image-preview" style="display: none; max-width: 100px; max-height: 100px; margin-top: 10px;">
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="articleStatus" required>
                        <option value="">Select Status</option>
                        <option value="published">Published</option>
                        <option value="draft">Draft</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('articleModal')">Cancel</button>
                    <button type="submit" class="btn-save">Save Article</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

     <script>
        // Global variables
        let users = [];
        let products = [];
        let transactions = [];
        let articles = [];
        let editingId = null;
        let editingType = null;

        // Loading screen
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                initializeData();
            }, 2500);
        });

        // Initialize data
        function initializeData() {
            loadRegisteredUsers();
            loadProducts();
            loadArticles();
            loadTransactions(); // Load real transactions from checkout
            
            updateStats();
            renderUsers();
            renderProducts();
            renderTransactions();
            renderArticles();
            populateProductSelect();
        }

        // Load transactions from localStorage (from checkout)
        function loadTransactions() {
            try {
                const savedTransactions = localStorage.getItem('kaira_transactions');
                if (savedTransactions) {
                    transactions = JSON.parse(savedTransactions);
                    console.log(`Loaded ${transactions.length} transactions from localStorage`);
                } else {
                    // Sample data if no real transactions exist
                    transactions = [
                        { 
                            id: 1, 
                            customer: 'evika', 
                            products: [
                                { name: 'WHITE BLAZER', quantity: 1, price: 324000 }
                            ],
                            totalAmount: 324000, 
                            paymentMethod: 'Credit Card',
                            status: 'completed', 
                            date: '2024-01-25',
                            customerInfo: {
                                email: 'evika@gmail.com',
                                phone: '+62812345678',
                                address: 'Jakarta, Indonesia'
                            }
                        }
                    ];
                    console.log('No transactions found, using sample data');
                }
            } catch (error) {
                console.error('Error loading transactions:', error);
                transactions = [];
            }
        }

        // Save transactions to localStorage
        function saveTransactions() {
            try {
                localStorage.setItem('kaira_transactions', JSON.stringify(transactions));
                console.log('Transactions saved successfully');
            } catch (error) {
                console.error('Error saving transactions:', error);
            }
        }

        // Load registered users from localStorage
        function loadRegisteredUsers() {
            try {
                const registeredUsers = localStorage.getItem('kaira_users') || localStorage.getItem('registered_users') || localStorage.getItem('users');
                if (registeredUsers) {
                    const parsedUsers = JSON.parse(registeredUsers);
                    users = parsedUsers.map((user, index) => ({
                        id: user.id || index + 1,
                        name: user.name || user.fullName || `${user.firstName || ''} ${user.lastName || ''}`.trim() || 'Unknown User',
                        email: user.email || 'No email provided',
                        role: user.role || 'customer',
                        status: user.status || 'active',
                        created: user.registrationDate || user.createdAt || new Date().toISOString().split('T')[0],
                        phone: user.phone || user.phoneNumber || '',
                        address: user.address || '',
                        lastLogin: user.lastLogin || 'Never'
                    }));
                    console.log(`Loaded ${users.length} registered users`);
                } else {
                    users = [
                        { id: 1, name: 'evika', email: 'evika@gmailcom', role: 'admin', status: 'active', created: '2024-01-15', phone: '+62812345678', address: 'Jakarta', lastLogin: '2024-01-25' },
                        { id: 2, name: 'haikal', email: 'haikal@gmail.com', role: 'customer', status: 'active', created: '2024-01-10', phone: '+62887654321', address: 'Surabaya', lastLogin: '2024-01-24' },
                        { id: 3, name: 'hivi', email: 'hivi@gmail.com', role: 'customer', status: 'inactive', created: '2024-01-20', phone: '+62898765432', address: 'Bandung', lastLogin: '2024-01-22' }
                    ];
                    console.log('No registered users found, using sample data');
                }
            } catch (error) {
                console.error('Error loading registered users:', error);
                users = [];
            }
        }

        // Load products from localStorage
        function loadProducts() {
            try {
                const savedProducts = localStorage.getItem('kaira_products');
                if (savedProducts) {
                    products = JSON.parse(savedProducts);
                    console.log(`Loaded ${products.length} products from localStorage`);
                } else {
                    products = [
                        {
                id: 1,
                name: 'WHITE BLAZER',
                price: 324.000,
                category: 'dress',
                image: 'img/new/3.jpg',
                description: 'Elegant white blazer perfect for formal occasions. Made from premium fabric with sophisticated design.'
            },
            {
                id: 2,
                name: 'GLASSES ',
                price: 188000,
                category: 'accessories',
                image: 'img/new/2.jpg',
                description: 'Luxurious glasses with premium quality. Perfect accessory for any outfit.'
            },
            {
                id: 3,
                name: 'COTTON HIJAB',
                price: 120000,
                category: 'accessories',
                image: 'img/new/3.jpg',
                description: 'Premium cotton hijab with modern design. Spacious and durable for everyday use.'
            },
            {
                id: 4,
                name: 'BLACK HEELS',
                price: 650000,
                category: 'shoes',
                image: 'img/new/sepatu2.jpg',
                description: 'Elegant black heels for sophisticated look. Comfortable and stylish for any occasion.'
            },
            {
                id: 5,
                name: 'SLING BAG',
                price: 750000,
                category: 'bags',
                image: 'img/new/14.jpg',
                description: 'Elegant and comfortable bag. Perfect for casual outings and warm weather.'
            },
            {
                id: 6,
                name: 'GOLD RINGS',
                price: 450000,
                category: 'accessories',
                image: 'img/new/cicin.jpg',
                description: 'Elegant gold accessories for special occasions. Includes necklace and earrings.'
            },
             {
                id: 7,
                name: 'LONG DRESS MAROON',
                price: 294000,
                category: 'dress',
                image: 'img/new/7.jpg',
                description: 'Elegant longdress perfect for formal occasions. Made from premium fabric with sophisticated design.'
            },
            {
                id: 8,
                name: 'BLACK SKIRT',
                price: 187000,
                category: 'dress',
                image: 'img/new/1.jpg',
                description: 'Elegant black skirt perfect for formal occasions. Made from premium fabric with sophisticated design.'
            },
                    ];
                    console.log('No products found in localStorage, using sample data');
                    saveProducts();
                }
            } catch (error) {
                console.error('Error loading products:', error);
                products = [];
            }
        }

        // Load articles from localStorage
        function loadArticles() {
            try {
                const savedArticles = localStorage.getItem('kaira_articles');
                if (savedArticles) {
                    articles = JSON.parse(savedArticles);
                    console.log(`Loaded ${articles.length} articles from localStorage`);
                } else {
                    articles = [
                        {
                id: 1, 
                title: 'FEMININE EMBRACING THE DARK SIDE OF ELEGANCE',
                excerpt: 'Discover the hottest fashion trends for spring 2024. From vibrant colors to minimalist designs, explore what\'s trending this season.',
                category: 'fashion',
                image: 'img/new/artikel3.jpg',
                author: 'LINA GARCIA-FERRADO',
                date: '2024-03-15',
                content: `
                <h1>The Allure of Feminine Dark Green Style</h1>
                <p>Dark green is the new black for women who want to embrace elegance with a touch of mystery. This rich and earthy color brings a sense of calm, confidence, and sophistication — making it perfect for both everyday outfits and special occasions.</p>
                <p>Pairing dark green with flowing fabrics like satin or chiffon enhances the feminine feel while maintaining a bold statement. Midi dresses with puff sleeves, silk blouses tucked into high-waisted trousers, or dark green wrap skirts all give off an effortlessly graceful vibe.</p>
                <p>To complete the look, gold accessories, muted nude heels, and a deep green handbag can elevate the overall style. For cooler seasons, a tailored dark green coat or velvet blazer adds warmth without compromising femininity.</p>
                <p>Whether you're heading to a dinner date or simply strolling through the city, feminine dark green fashion invites admiration — blending strength with softness in the most stylish way.</p>
                                `
            },
            {
                id: 2,
                title: 'ICONIC RED-CARPET LOOKS STAR',
                excerpt: 'Learn how to achieve a natural, effortless look with minimal makeup. Perfect for everyday wear and busy lifestyles.',
                category: 'beauty',
                image: 'img/new/tas5.jpg',
                author: ' MARGOT ROBBIE',
                date: '2024-03-12',
                content: `
                <h1>Red-Carpet Beauty Secrets Revealed</h1>
                <p>Red-carpet looks are not just about glamorous gowns — they’re about flawless makeup and confidence. To recreate the star-studded glow, start with a luminous base using a hydrating primer and radiant foundation. Highlight the high points of your face — cheekbones, nose bridge, and cupid’s bow — for that signature glow.</p>
                <p>Bold eyeliner, voluminous lashes, and a classic red lip are timeless red-carpet staples. Choose makeup that stays put under lights and cameras, including setting spray and waterproof formulas. Finish the look with sleek hair or soft waves, depending on your personal style.</p>
                <p>Confidence is key — wear your look like a true icon and let your inner star shine through.</p>

                `
            },
            {
                id: 3,
                title: 'DANIELLE LUXEMBOURG IN BERLIN',
                excerpt: 'Make conscious fashion choices that benefit both you and the environment. A guide to sustainable shopping.',
                category: 'lifestyle',
                image: 'img/new/artikel1.jpg',
                author: 'SUSTAINABLE FASHION',
                date: '2024-03-10',
                content: `
                <h1>Danielle Luxembourg’s Sustainable Style in Berlin</h1>
                <p>While exploring Berlin, Danielle Luxembourg proves that fashion can be both chic and conscious. Known for her commitment to eco-friendly brands, Danielle blends urban style with sustainable choices — from thrifted jackets to biodegradable fabrics.</p>
                <p>She favors earthy tones and timeless silhouettes that align with her values, choosing pieces that tell a story. Her Berlin wardrobe includes organic cotton jeans, vintage boots, and handmade accessories from local artisans.</p>
                <p>Danielle’s style reflects the vibrant culture of Berlin while promoting a greener future — proving that sustainability is always in fashion.</p>

                `
            },
            {
                id: 4,
                title: 'EVERYTHING YOU NEED TO KNOW',
                excerpt: 'Explore the vibrant color palette that will dominate summer fashion. From coral to sage green, find your perfect shade.',
                category: 'trends',
                image: 'img/new/artike2.jpg',
                author: 'CHIRSTYA',
                date: '2024-03-08',
                content: `
                <h1>Everything You Need to Know About Summer Color Trends</h1>
                <p>This summer, your wardrobe gets a color upgrade. From coral to sage green, vibrant hues are dominating the season. Coral brings an energetic warmth, perfect for beachwear or bright tops, while sage green offers a more grounded, elegant aesthetic.</p>
                <p>Try mixing in electric blues and sunny yellows to add dynamic contrasts. These shades work best with breathable fabrics like cotton, linen, and bamboo — perfect for summer’s heat. Add a pop of color with accessories or go all-out with color-blocked outfits.</p>
                <p>Whether you're into subtle accents or bold statements, there's a summer color for everyone. Embrace the trend and express yourself through your palette.</p>

                `
            },
            {
                id: 5,
                title: 'TRENS RETRO<',
                excerpt: 'Create a versatile wardrobe with essential pieces that mix and match effortlessly. Quality over quantity approach.',
                category: 'fashion',
                image: 'img/new/11.jpg',
                author: 'EMILY RATAJKOWSKI',
                date: '2024-03-05',
                content: `
                <h1>The Return of Retro: Fashion’s Nostalgic Comeback</h1>
                <p>Retro trends are making a fierce comeback, bringing the charm of past decades into modern wardrobes. From flared jeans and oversized sunglasses to colorful prints and vintage sneakers, the 70s to 90s are back in style.</p>
                <p>Mix and match old-school staples with contemporary pieces for a balanced look. A vintage leather jacket over a modern midi dress, or wide-leg pants with a crop top, can revive your outfit with nostalgic flair.</p>
                <p>Fashion cycles are proof that what once was old becomes new again — so dig into your closet (or your parents’) and embrace the retro wave with confidence and creativity.</p>

                `
            },
            {
                id: 6,
                title: 'TREND JEWELRY',
                excerpt: 'Establish a simple yet effective skincare routine. Learn about the must-have products for healthy, glowing skin.',
                category: 'beauty',
                image: 'img/new/cicin.jpg',
                author: 'LARA SANCHEZ-PORTILLO<',
                date: '2024-03-03',
                content: `
                <h1>Jewelry Trends That Are Shaping 2024</h1>
                <p>This year’s jewelry trends celebrate individuality and bold statements. Oversized earrings, chunky rings, and layered necklaces are stealing the spotlight. Look for pieces that blend materials — pearls with metal, resin with gemstones — for a fresh, eclectic vibe.</p>
                <p>Gold remains timeless, but silver and colored enamel are seeing a rise in popularity. Personalized jewelry like nameplates, zodiac charms, or birthstone pieces add a meaningful touch.</p>
                <p>Whether you’re going minimalist or maximalist, let your accessories tell your story. Jewelry in 2024 is all about self-expression and creativity.</p>

                `
            },
                    ];
                    console.log('No articles found in localStorage, using sample data');
                    saveArticles();
                }
            } catch (error) {
                console.error('Error loading articles:', error);
                articles = [];
            }
        }

        // Save products to localStorage
        function saveProducts() {
            try {
                localStorage.setItem('kaira_products', JSON.stringify(products));
                console.log('Products saved successfully');
            } catch (error) {
                console.error('Error saving products:', error);
            }
        }

        // Save articles to localStorage
        function saveArticles() {
            try {
                localStorage.setItem('kaira_articles', JSON.stringify(articles));
                console.log('Articles saved successfully');
            } catch (error) {
                console.error('Error saving articles:', error);
            }
        }

        // Navigation
        document.querySelectorAll('.menu-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
                this.classList.add('active');
                const sectionId = this.getAttribute('data-section');
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // Update statistics
        function updateStats() {
            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('totalTransactions').textContent = transactions.length;
            document.getElementById('totalArticles').textContent = articles.length;
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
            editingId = null;
            editingType = null;
            const form = document.querySelector(`#${modalId} form`);
            if (form) form.reset();
            // Reset hidden fields
            const hiddenFields = form.querySelectorAll('input[type="hidden"]');
            hiddenFields.forEach(field => field.value = '');
            // Reset image preview if it exists
            const imagePreview = document.getElementById('productImagePreview');
            if (imagePreview) {
                imagePreview.src = '';
                imagePreview.style.display = 'none';
            }
            // Reset article image preview if it exists
            const articleImagePreview = document.getElementById('articleImagePreview');
            if (articleImagePreview) {
                articleImagePreview.src = '';
                articleImagePreview.style.display = 'none';
            }
            // Reset modal title
            const titleElement = document.querySelector(`#${modalId} .modal-title`);
            if (titleElement) {
                if (modalId === 'userModal') titleElement.textContent = 'Add New User';
                if (modalId === 'productModal') titleElement.textContent = 'Add New Product';
                if (modalId === 'articleModal') titleElement.textContent = 'Add New Article';
                if (modalId === 'transactionModal') titleElement.textContent = 'Add New Transaction';
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            editingId = null;
            editingType = null;
        }

        // Notification function
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
                reader.readAsDataURL(file);
            });
        }

        // Users CRUD
        function renderUsers() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>
                        <div style="font-weight: 500;">${user.name}</div>
                        <div style="font-size: 12px; color: #666; margin-top: 2px;">${user.phone || 'No phone'}</div>
                    </td>
                    <td>${user.email}</td>
                    <td style="text-transform: uppercase;">${user.role}</td>
                    <td><span class="status-badge status-${user.status}">${user.status}</span></td>
                    <td>
                        <div>${user.created}</div>
                        <div style="font-size: 11px; color: #888;">Last: ${user.lastLogin || 'Never'}</div>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editUser(${user.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteUser(${user.id})">Delete</button>
                            <button class="btn-view" onclick="viewUserDetails(${user.id})" style="background: #007bff; font-size: 11px; padding: 4px 8px;">View</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ENHANCED EDIT USER FUNCTION
        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                editingId = id;
                editingType = 'user';
                
                // Set modal title
                document.getElementById('userModalTitle').textContent = 'Edit User';
                
                // Set hidden field
                document.getElementById('editingUserId').value = id;
                
                // Populate form fields
                document.getElementById('userName').value = user.name;
                document.getElementById('userEmail').value = user.email;
                document.getElementById('userPhone').value = user.phone || '';
                document.getElementById('userRole').value = user.role;
                document.getElementById('userStatus').value = user.status;
                
                // Open modal
                document.getElementById('userModal').classList.add('show');
            }
        }

        function deleteUser(id) {
            const user = users.find(u => u.id === id);
            if (user && confirm(`Are you sure you want to delete user "${user.name}"?`)) {
                users = users.filter(u => u.id !== id);
                saveUsers();
                renderUsers();
                updateStats();
                showNotification('User deleted successfully!', 'success');
            }
        }

        function saveUsers() {
            try {
                localStorage.setItem('kaira_users', JSON.stringify(users));
                console.log('Users saved successfully');
            } catch (error) {
                console.error('Error saving users:', error);
            }
        }

        function viewUserDetails(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                const details = `
        User Details:
        Name: ${user.name}
        Email: ${user.email}
        Phone: ${user.phone || 'Not provided'}
        Address: ${user.address || 'Not provided'}
        Role: ${user.role}
        Status: ${user.status}
        Registration Date: ${user.created}
        Last Login: ${user.lastLogin || 'Never'}
                `.trim();
                alert(details);
            }
        }

        // Products CRUD
        function renderProducts() {
            const tbody = document.getElementById('productsTableBody');
            tbody.innerHTML = '';
            products.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.id}</td>
                    <td><img src="${product.image}" alt="${product.name}" class="image-preview"></td>
                    <td>${product.name}</td>
                    <td style="text-transform: uppercase;">${product.category}</td>
                    <td>Rp ${product.price.toLocaleString()}</td>
                    <td>${product.stock}</td>
                    <td><span class="status-badge status-${product.status}">${product.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editProduct(${product.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteProduct(${product.id})">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ENHANCED EDIT PRODUCT FUNCTION
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                editingId = id;
                editingType = 'product';
                
                // Set modal title
                document.getElementById('productModalTitle').textContent = 'Edit Product';
                
                // Set hidden field
                document.getElementById('editingProductId').value = id;
                
                // Populate form fields
                document.getElementById('productName').value = product.name;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productStock').value = product.stock;
                document.getElementById('productDescription').value = product.description;
                document.getElementById('productStatus').value = product.status;
                
                // Show image preview
                const imagePreview = document.getElementById('productImagePreview');
                if (imagePreview && product.image) {
                    imagePreview.src = product.image;
                    imagePreview.style.display = 'block';
                }
                
                // Open modal
                document.getElementById('productModal').classList.add('show');
            }
        }

        function deleteProduct(id) {
            const product = products.find(p => p.id === id);
            if (product && confirm(`Are you sure you want to delete product "${product.name}"?`)) {
                products = products.filter(p => p.id !== id);
                saveProducts();
                renderProducts();
                updateStats();
                populateProductSelect();
                showNotification('Product deleted successfully!', 'success');
            }
        }

        // Handle image upload
        document.addEventListener('DOMContentLoaded', function() {
            const productImageInput = document.getElementById('productImage');
            const productImagePreview = document.getElementById('productImagePreview');
            if (productImageInput && productImagePreview) {
                productImageInput.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        try {
                            const base64Image = await fileToBase64(file);
                            productImagePreview.src = base64Image;
                            productImagePreview.style.display = 'block';
                        } catch (error) {
                            console.error('Error processing image:', error);
                            showNotification('Failed to process image.', 'error');
                        }
                    }
                });
            }
            
            // Add event listener for article image URL input
            const articleImageInput = document.getElementById('articleImage');
            const articleImagePreview = document.getElementById('articleImagePreview');
            if (articleImageInput && articleImagePreview) {
                articleImageInput.addEventListener('input', function(e) {
                    const imageUrl = e.target.value.trim();
                    if (imageUrl) {
                        articleImagePreview.src = imageUrl;
                        articleImagePreview.style.display = 'block';
                        
                        // Handle image load error
                        articleImagePreview.onerror = function() {
                            articleImagePreview.style.display = 'none';
                            showNotification('Invalid image URL', 'error');
                        };
                    } else {
                        articleImagePreview.style.display = 'none';
                    }
                });
            }
        });

        // Transactions CRUD
        function renderTransactions() {
            const tbody = document.getElementById('transactionsTableBody');
            tbody.innerHTML = '';
            transactions.forEach(transaction => {
                // Format products list
                let productsText = '';
                if (transaction.products && Array.isArray(transaction.products)) {
                    productsText = transaction.products.map(p => `${p.name} (${p.quantity}x)`).join(', ');
                } else {
                    productsText = transaction.product || 'N/A';
                }

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${transaction.id}</td>
                    <td>
                        <div style="font-weight: 500;">${transaction.customer}</div>
                        <div style="font-size: 11px; color: #666;">${transaction.customerInfo?.email || ''}</div>
                    </td>
                    <td style="max-width: 200px; word-wrap: break-word;">${productsText}</td>
                    <td>Rp ${(transaction.totalAmount || transaction.amount || 0).toLocaleString()}</td>
                    <td style="text-transform: capitalize;">${transaction.paymentMethod || 'N/A'}</td>
                    <td><span class="status-badge status-${transaction.status}">${transaction.status}</span></td>
                    <td>${transaction.date}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editTransaction(${transaction.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteTransaction(${transaction.id})">Delete</button>
                            <button class="btn-view" onclick="viewTransactionDetails(${transaction.id})">View</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // View transaction details
        function viewTransactionDetails(id) {
            const transaction = transactions.find(t => t.id === id);
            if (transaction) {
                let productsDetails = '';
                if (transaction.products && Array.isArray(transaction.products)) {
                    productsDetails = transaction.products.map(p => 
                        `- ${p.name}: ${p.quantity}x @ Rp ${p.price.toLocaleString()} = Rp ${(p.quantity * p.price).toLocaleString()}`
                    ).join('\n');
                } else {
                    productsDetails = `- ${transaction.product || 'N/A'}`;
                }

                const details = `
        Transaction Details:
        ID: ${transaction.id}
        Customer: ${transaction.customer}
        Email: ${transaction.customerInfo?.email || 'N/A'}
        Phone: ${transaction.customerInfo?.phone || 'N/A'}
        Address: ${transaction.customerInfo?.address || 'N/A'}
        
        Products:
        ${productsDetails}
        
        Total Amount: Rp ${(transaction.totalAmount || transaction.amount || 0).toLocaleString()}
        Payment Method: ${transaction.paymentMethod || 'N/A'}
        Status: ${transaction.status}
        Date: ${transaction.date}
                `.trim();
                alert(details);
            }
        }

        // ENHANCED EDIT TRANSACTION FUNCTION
        function editTransaction(id) {
            const transaction = transactions.find(t => t.id === id);
            if (transaction) {
                editingId = id;
                editingType = 'transaction';
                
                // Set modal title
                document.getElementById('transactionModalTitle').textContent = 'Edit Transaction';
                
                // Set hidden field
                document.getElementById('editingTransactionId').value = id;
                
                // Populate form fields
                document.getElementById('transactionCustomer').value = transaction.customer;
                
                // For products, if it's an array, take the first one for simplicity
                if (transaction.products && Array.isArray(transaction.products) && transaction.products.length > 0) {
                    document.getElementById('transactionProduct').value = transaction.products[0].name;
                    document.getElementById('transactionQuantity').value = transaction.products[0].quantity;
                } else {
                    document.getElementById('transactionProduct').value = transaction.product || '';
                    document.getElementById('transactionQuantity').value = transaction.quantity || 1;
                }
                
                document.getElementById('transactionAmount').value = transaction.totalAmount || transaction.amount || 0;
                document.getElementById('transactionPayment').value = transaction.paymentMethod || '';
                document.getElementById('transactionStatus').value = transaction.status;
                
                // Open modal
                document.getElementById('transactionModal').classList.add('show');
            }
        }

        function deleteTransaction(id) {
            const transaction = transactions.find(t => t.id === id);
            if (transaction && confirm('Are you sure you want to delete this transaction?')) {
                transactions = transactions.filter(t => t.id !== id);
                saveTransactions();
                renderTransactions();
                updateStats();
                showNotification('Transaction deleted successfully!', 'success');
            }
        }

        // Articles CRUD
        function renderArticles() {
            const tbody = document.getElementById('articlesTableBody');
            tbody.innerHTML = '';
            articles.forEach(article => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${article.id}</td>
                    <td><img src="${article.image}" alt="${article.title}" class="image-preview"></td>
                    <td>${article.title}</td>
                    <td>${article.author}</td>
                    <td style="text-transform: uppercase;">${article.category}</td>
                    <td><span class="status-badge status-${article.status === 'published' ? 'active' : 'pending'}">${article.status}</span></td>
                    <td>${article.date}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editArticle(${article.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteArticle(${article.id})">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ENHANCED EDIT ARTICLE FUNCTION
        function editArticle(id) {
            const article = articles.find(a => a.id === id);
            if (article) {
                editingId = id;
                editingType = 'article';
                
                // Set modal title
                document.getElementById('articleModalTitle').textContent = 'Edit Article';
                
                // Set hidden field
                document.getElementById('editingArticleId').value = id;
                
                // Populate form fields
                document.getElementById('articleTitle').value = article.title;
                document.getElementById('articleAuthor').value = article.author;
                document.getElementById('articleCategory').value = article.category;
                document.getElementById('articleContent').value = article.content;
                document.getElementById('articleExcerpt').value = article.excerpt || '';
                document.getElementById('articleImage').value = article.image || '';
                document.getElementById('articleStatus').value = article.status;
                
                // Show image preview
                const imagePreview = document.getElementById('articleImagePreview');
                if (imagePreview && article.image) {
                    imagePreview.src = article.image;
                    imagePreview.style.display = 'block';
                }
                
                // Open modal
                document.getElementById('articleModal').classList.add('show');
            }
        }

        function deleteArticle(id) {
            const article = articles.find(a => a.id === id);
            if (article && confirm(`Are you sure you want to delete article "${article.title}"?`)) {
                articles = articles.filter(a => a.id !== id);
                saveArticles();
                renderArticles();
                updateStats();
                showNotification('Article deleted successfully!', 'success');
            }
        }

        // Populate product select for transactions
        function populateProductSelect() {
            const select = document.getElementById('transactionProduct');
            select.innerHTML = '<option value="">Select Product</option>';
            products.forEach(product => {
                const option = document.createElement('option');
                option.value = product.name;
                option.textContent = product.name;
                select.appendChild(option);
            });
        }

        // ENHANCED FORM SUBMISSIONS
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const editingUserId = document.getElementById('editingUserId').value;
            
            const userData = {
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                phone: document.getElementById('userPhone').value || '',
                role: document.getElementById('userRole').value,
                status: document.getElementById('userStatus').value,
                created: new Date().toISOString().split('T')[0],
                lastLogin: 'Never'
            };
            
            if (editingUserId && editingType === 'user') {
                // Update existing user
                const index = users.findIndex(u => u.id == editingUserId);
                if (index !== -1) {
                    users[index] = { ...users[index], ...userData };
                    showNotification('User updated successfully!', 'success');
                }
            } else {
                // Add new user
                userData.id = users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1;
                users.push(userData);
                showNotification('User added successfully!', 'success');
            }
            saveUsers();
            renderUsers();
            updateStats();
            closeModal('userModal');
        });

        document.getElementById('productForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const editingProductId = document.getElementById('editingProductId').value;
            
            const productData = {
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: parseInt(document.getElementById('productPrice').value),
                stock: parseInt(document.getElementById('productStock').value),
                description: document.getElementById('productDescription').value,
                status: document.getElementById('productStatus').value,
                image: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=100&h=100&fit=crop'
            };
            
            const productImageInput = document.getElementById('productImage');
            if (productImageInput && productImageInput.files[0]) {
                try {
                    productData.image = await fileToBase64(productImageInput.files[0]);
                } catch (error) {
                    console.error('Error processing image:', error);
                    showNotification('Failed to process image, using default.', 'error');
                }
            }
            
            if (editingProductId && editingType === 'product') {
                // Update existing product
                const index = products.findIndex(p => p.id == editingProductId);
                if (index !== -1) {
                    products[index] = { ...products[index], ...productData };
                    showNotification('Product updated successfully!', 'success');
                }
            } else {
                // Add new product
                productData.id = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                products.push(productData);
                showNotification('Product added successfully!', 'success');
            }
            saveProducts();
            renderProducts();
            updateStats();
            populateProductSelect();
            closeModal('productModal');
        });

        document.getElementById('transactionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const editingTransactionId = document.getElementById('editingTransactionId').value;
            
            const transactionData = {
                customer: document.getElementById('transactionCustomer').value,
                product: document.getElementById('transactionProduct').value,
                quantity: parseInt(document.getElementById('transactionQuantity').value),
                totalAmount: parseInt(document.getElementById('transactionAmount').value),
                paymentMethod: document.getElementById('transactionPayment').value,
                status: document.getElementById('transactionStatus').value,
                date: new Date().toISOString().split('T')[0]
            };
            
            if (editingTransactionId && editingType === 'transaction') {
                // Update existing transaction
                const index = transactions.findIndex(t => t.id == editingTransactionId);
                if (index !== -1) {
                    transactions[index] = { ...transactions[index], ...transactionData };
                    showNotification('Transaction updated successfully!', 'success');
                }
            } else {
                // Add new transaction
                transactionData.id = transactions.length > 0 ? Math.max(...transactions.map(t => t.id)) + 1 : 1;
                transactions.push(transactionData);
                showNotification('Transaction added successfully!', 'success');
            }
            saveTransactions();
            renderTransactions();
            updateStats();
            closeModal('transactionModal');
        });

        document.getElementById('articleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const editingArticleId = document.getElementById('editingArticleId').value;
            
            const articleData = {
                title: document.getElementById('articleTitle').value,
                author: document.getElementById('articleAuthor').value,
                category: document.getElementById('articleCategory').value,
                content: document.getElementById('articleContent').value,
                excerpt: document.getElementById('articleExcerpt').value,
                image: document.getElementById('articleImage').value || 'https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&h=300&fit=crop',
                status: document.getElementById('articleStatus').value,
                date: new Date().toISOString().split('T')[0]
            };
            
            if (editingArticleId && editingType === 'article') {
                // Update existing article
                const index = articles.findIndex(a => a.id == editingArticleId);
                if (index !== -1) {
                    articles[index] = { ...articles[index], ...articleData };
                    showNotification('Article updated successfully!', 'success');
                }
            } else {
                // Add new article
                articleData.id = articles.length > 0 ? Math.max(...articles.map(a => a.id)) + 1 : 1;
                articles.push(articleData);
                showNotification('Article added successfully!', 'success');
            }
            saveArticles();
            renderArticles();
            updateStats();
            closeModal('articleModal');
        });

        // Search functionality
        document.getElementById('userSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredUsers = users.filter(user => 
                user.name.toLowerCase().includes(searchTerm) || 
                user.email.toLowerCase().includes(searchTerm) ||
                (user.phone && user.phone.toLowerCase().includes(searchTerm)) ||
                user.role.toLowerCase().includes(searchTerm)
            );
            renderFilteredUsers(filteredUsers);
        });

        document.getElementById('productSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) || 
                product.category.toLowerCase().includes(searchTerm)
            );
            renderFilteredProducts(filteredProducts);
        });

        document.getElementById('transactionSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredTransactions = transactions.filter(transaction => 
                transaction.customer.toLowerCase().includes(searchTerm) || 
                (transaction.product && transaction.product.toLowerCase().includes(searchTerm)) ||
                (transaction.products && transaction.products.some(p => p.name.toLowerCase().includes(searchTerm)))
            );
            renderFilteredTransactions(filteredTransactions);
        });

        document.getElementById('articleSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredArticles = articles.filter(article => 
                article.title.toLowerCase().includes(searchTerm) || 
                article.author.toLowerCase().includes(searchTerm)
            );
            renderFilteredArticles(filteredArticles);
        });

        // Filter functions
        function renderFilteredUsers(filteredUsers) {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            filteredUsers.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>
                        <div style="font-weight: 500;">${user.name}</div>
                        <div style="font-size: 12px; color: #666; margin-top: 2px;">${user.phone || 'No phone'}</div>
                    </td>
                    <td>${user.email}</td>
                    <td style="text-transform: uppercase;">${user.role}</td>
                    <td><span class="status-badge status-${user.status}">${user.status}</span></td>
                    <td>
                        <div>${user.created}</div>
                        <div style="font-size: 11px; color: #888;">Last: ${user.lastLogin || 'Never'}</div>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editUser(${user.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteUser(${user.id})">Delete</button>
                            <button class="btn-view" onclick="viewUserDetails(${user.id})" style="background: #007bff; font-size: 11px; padding: 4px 8px;">View</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderFilteredProducts(filteredProducts) {
            const tbody = document.getElementById('productsTableBody');
            tbody.innerHTML = '';
            filteredProducts.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.id}</td>
                    <td><img src="${product.image}" alt="${product.name}" class="image-preview"></td>
                    <td>${product.name}</td>
                    <td style="text-transform: uppercase;">${product.category}</td>
                    <td>Rp ${product.price.toLocaleString()}</td>
                    <td>${product.stock}</td>
                    <td><span class="status-badge status-${product.status}">${product.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editProduct(${product.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteProduct(${product.id})">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderFilteredTransactions(filteredTransactions) {
            const tbody = document.getElementById('transactionsTableBody');
            tbody.innerHTML = '';
            filteredTransactions.forEach(transaction => {
                // Format products list
                let productsText = '';
                if (transaction.products && Array.isArray(transaction.products)) {
                    productsText = transaction.products.map(p => `${p.name} (${p.quantity}x)`).join(', ');
                } else {
                    productsText = transaction.product || 'N/A';
                }

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${transaction.id}</td>
                    <td>
                        <div style="font-weight: 500;">${transaction.customer}</div>
                        <div style="font-size: 11px; color: #666;">${transaction.customerInfo?.email || ''}</div>
                    </td>
                    <td style="max-width: 200px; word-wrap: break-word;">${productsText}</td>
                    <td>Rp ${(transaction.totalAmount || transaction.amount || 0).toLocaleString()}</td>
                    <td style="text-transform: capitalize;">${transaction.paymentMethod || 'N/A'}</td>
                    <td><span class="status-badge status-${transaction.status}">${transaction.status}</span></td>
                    <td>${transaction.date}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editTransaction(${transaction.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteTransaction(${transaction.id})">Delete</button>
                            <button class="btn-view" onclick="viewTransactionDetails(${transaction.id})">View</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderFilteredArticles(filteredArticles) {
            const tbody = document.getElementById('articlesTableBody');
            tbody.innerHTML = '';
            filteredArticles.forEach(article => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${article.id}</td>
                    <td><img src="${article.image}" alt="${article.title}" class="image-preview"></td>
                    <td>${article.title}</td>
                    <td>${article.author}</td>
                    <td style="text-transform: uppercase;">${article.category}</td>
                    <td><span class="status-badge status-${article.status === 'published' ? 'active' : 'pending'}">${article.status}</span></td>
                    <td>${article.date}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit" onclick="editArticle(${article.id})">Edit</button>
                            <button class="btn-delete" onclick="deleteArticle(${article.id})">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Export users function
        function exportUsers() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "ID,Name,Email,Phone,Role,Status,Registration Date,Last Login\n"
                + users.map(user => 
                    `${user.id},"${user.name}","${user.email}","${user.phone || ''}","${user.role}","${user.status}","${user.created}","${user.lastLogin || 'Never'}"`
                ).join("\n");
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `users_export_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showNotification('Users exported successfully!', 'success');
        }

        // Refresh users function
        function refreshUsers() {
            loadRegisteredUsers();
            renderUsers();
            updateStats();
            showNotification('User data refreshed!', 'success');
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                showNotification('Logged out successfully!', 'success');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            }
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('show');
                    editingId = null;
                    editingType = null;
                }
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.show').forEach(modal => {
                    modal.classList.remove('show');
                });
                editingId = null;
                editingType = null;
            }
        });

        // Add event listeners for buttons
        document.addEventListener('DOMContentLoaded', function() {
            const refreshButton = document.getElementById('refreshUsersBtn');
            if (refreshButton) {
                refreshButton.addEventListener('click', refreshUsers);
            }
            const exportButton = document.getElementById('exportUsersBtn');
            if (exportButton) {
                exportButton.addEventListener('click', exportUsers);
            }
        });

        // Auto-refresh transactions every 30 seconds to check for new orders
        setInterval(() => {
            const currentTransactionCount = transactions.length;
            loadTransactions();
            if (transactions.length !== currentTransactionCount) {
                renderTransactions();
                updateStats();
                showNotification(`Transaction data updated! Found ${transactions.length - currentTransactionCount} new transactions.`, 'success');
            }
        }, 30000);
        function loadRegisteredUsers() {
    try {
        const registeredUsers = localStorage.getItem('kaira_users');
        if (registeredUsers) {
            const parsedUsers = JSON.parse(registeredUsers);
            users = parsedUsers.map((user, index) => ({
                id: user.id || index + 1,
                name: user.name || 'Unknown User',
                email: user.email || 'No email provided',
                role: user.role || 'customer',
                status: user.status || 'active',
                created: user.created || new Date().toISOString().split('T')[0],
                phone: user.phone || '',
                address: user.address || '',
                lastLogin: user.lastLogin || 'Never'
            }));
            console.log(`Loaded ${users.length} registered users`);
        } else {
            users = [
                { id: 1, name: 'evika', email: 'evika@gmailcom', role: 'admin', status: 'active', created: '2024-01-15', phone: '+62812345678', address: 'Jakarta', lastLogin: '2024-01-25' },
                { id: 2, name: 'haikal', email: 'haikal@gmail.com', role: 'customer', status: 'active', created: '2024-01-10', phone: '+62887654321', address: 'Surabaya', lastLogin: '2024-01-24' },
                { id: 3, name: 'hivi', email: 'hivi@gmail.com', role: 'customer', status: 'inactive', created: '2024-01-20', phone: '+62898765432', address: 'Bandung', lastLogin: '2024-01-22' }
            ];
            console.log('No registered users found, using sample data');
            saveUsers();
        }
    } catch (error) {
        console.error('Error loading registered users:', error);
        users = [];
    }
}
    </script>
</body>
</html>
